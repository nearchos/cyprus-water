<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select quiz</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link href="css/cyprus_dams.css" rel="stylesheet" type="text/css"/>
    <script src="js/APIUtils.js"></script>
    <script src="js/QuizClasses.js"></script>
    <script src="js/GetQuestions.js"></script>
    <script>var QUIZ;</script>
</head>
<body onload="getQuestions();">

<div id="quizLoader" class="center-align">
    <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue-only">
            <div class="circle-clipper left">
                <div class="circle"></div>
            </div>
            <div class="gap-patch">
                <div class="circle"></div>
            </div>
            <div class="circle-clipper right">
                <div class="circle"></div>
            </div>
        </div>
    </div>
</div>

<div id="quizContainer" style="margin: auto; max-width: 500px">

    <p>Question <span id="questionNumber"></span></p>
    <p id="questionContent"></p>

    <p><small>Source: <span id="questionSource"></span></small></p>

    <div id="answerOptionsContainer">
        <p>
            <label>
                <input class="with-gap answer" name="answer" id="answerA" value="" onclick="enableSubmitBtn()"
                       type="radio"/>
                <span id="labelAnswerA"></span>
            </label>
        </p>
        <p>
            <label>
                <input class="with-gap answer" name="answer" id="answerB" value="" onclick="enableSubmitBtn()"
                       type="radio"/>
                <span id="labelAnswerB"></span>
            </label>
        </p>
        <p>
            <label>
                <input class="with-gap answer" name="answer" id="answerC" value="" onclick="enableSubmitBtn()"
                       type="radio"/>
                <span id="labelAnswerC"></span>
            </label>
        </p>
        <p>
            <label>
                <input class="with-gap answer" name="answer" id="answerD" value="" onclick="enableSubmitBtn()"
                       type="radio"/>
                <span id="labelAnswerD"></span>
            </label>
        </p>
    </div>

    <div id="submitButtonContainer">
        <input id="submitButton" class="btn blue darken-3" type="button" value="Submit" onclick="submitAnswer()" style="visibility: hidden"/>
    </div>

</div>

<div id="errorContainer">
    <p>The quiz has no questions.</p>
</div>

<script>

    var currentQuestionIndex = 0;

    function submitAnswer() {
        var question = QUIZ.getNextQuestion();
        var answerElements = document.getElementsByClassName("answer");
        var userAnswerElement;
        for (var i = 0; i < answerElements.length; i++) {
            if (answerElements[i].checked) {
                userAnswerElement = answerElements[i];
                break;
            }
        }
        var answerResult = QUIZ.answerQuestion(userAnswerElement.value);
        if (answerResult === -1) { //The quiz is finished.
            alert("Finished!"); //TODO Replace.
        }
        else if (answerResult === true) { //Answer is correct.
            alert("Correct");
        }
        else if (answerResult === false) { //Answer is wrong.
            alert("Wrong");
        }
    }

    function enableSubmitBtn() {
        var button = document.getElementById("submitButton");
        button.style.visibility = "visible";
    }

</script>


</body>
</html>